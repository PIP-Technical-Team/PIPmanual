<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PIP Manual - 3&nbsp; Folder Structure</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./joining_data.html" rel="next">
<link href="./internal_workflow.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./intro.html">Introduction</a></li><li class="breadcrumb-item"><a href="./Folder_structure.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Folder Structure</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">PIP Manual</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./internal_workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Internal Workflow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Folder_structure.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Folder Structure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./joining_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Joining Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">PIP data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./price_framework.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Price FrameWork (pfw) data frame</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./PRIMUS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">PRIMUS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./welfare_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Welfare data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./auxiliary_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Auxiliary data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">PIP Procedures</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pc_pipeline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Poverty Calculator Pipeline (pre-computed estimations)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm_pipeline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Table Maker Pipeline</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Standalone Technical Considerations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./load_md_aux.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Load microdata and Auxiliary data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./docker.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Docker Container</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./azure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Deploying to Azure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Github Workflows</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./subtrees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Subtrees using Smartgit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#pip-data" id="toc-pip-data" class="nav-link active" data-scroll-target="#pip-data"><span class="header-section-number">3.1</span> PIP-Data</a></li>
  <li><a href="#pip-data_qa" id="toc-pip-data_qa" class="nav-link" data-scroll-target="#pip-data_qa"><span class="header-section-number">3.2</span> PIP-Data_QA</a>
  <ul class="collapse">
  <li><a href="#aux" id="toc-aux" class="nav-link" data-scroll-target="#aux"><span class="header-section-number">3.2.1</span> _aux</a></li>
  <li><a href="#inventory" id="toc-inventory" class="nav-link" data-scroll-target="#inventory"><span class="header-section-number">3.2.2</span> _inventory</a></li>
  <li><a href="#country-data" id="toc-country-data" class="nav-link" data-scroll-target="#country-data"><span class="header-section-number">3.2.3</span> Country data</a></li>
  </ul></li>
  <li><a href="#pip-data_extsol" id="toc-pip-data_extsol" class="nav-link" data-scroll-target="#pip-data_extsol"><span class="header-section-number">3.3</span> PIP-Data_ExtSOL</a></li>
  <li><a href="#pip_data_testing" id="toc-pip_data_testing" class="nav-link" data-scroll-target="#pip_data_testing"><span class="header-section-number">3.4</span> PIP_Data_Testing</a></li>
  <li><a href="#pip_data_vintage" id="toc-pip_data_vintage" class="nav-link" data-scroll-target="#pip_data_vintage"><span class="header-section-number">3.5</span> PIP_Data_Vintage</a></li>
  <li><a href="#pip_ingestion_pipeline" id="toc-pip_ingestion_pipeline" class="nav-link" data-scroll-target="#pip_ingestion_pipeline"><span class="header-section-number">3.6</span> pip_ingestion_pipeline</a>
  <ul class="collapse">
  <li><a href="#pc_data" id="toc-pc_data" class="nav-link" data-scroll-target="#pc_data"><span class="header-section-number">3.6.1</span> pc_data</a></li>
  <li><a href="#tb_data" id="toc-tb_data" class="nav-link" data-scroll-target="#tb_data"><span class="header-section-number">3.6.2</span> tb_data</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="folder-structure" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Folder Structure</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>The PIP root directory (<code>Sys.getenv("PIP_ROOT_DIR")</code>) contains the following main folders.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Folder</th>
<th style="text-align: left;">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">PIP-Data</td>
<td style="text-align: left;">N/A</td>
</tr>
<tr class="even">
<td style="text-align: left;">PIP-Data_QA</td>
<td style="text-align: left;">QA directory for survey and AUX data</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PIP-Data_ExtSOL</td>
<td style="text-align: left;">SOL</td>
</tr>
<tr class="even">
<td style="text-align: left;">PIP-PIP_Data_Testing</td>
<td style="text-align: left;">Testing directory for pipaux and pipdp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PIP-PIP_Data_Vintage</td>
<td style="text-align: left;">N/A</td>
</tr>
<tr class="even">
<td style="text-align: left;">pip_ingestion_pipeline</td>
<td style="text-align: left;">Pipeline directory</td>
</tr>
</tbody>
</table>
<p>Details on each folder and their subfolders are given below.</p>
<section id="pip-data" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="pip-data"><span class="header-section-number">3.1</span> PIP-Data</h2>
<p><span style="color:red">This folder is no longer in use</span>.</p>
<p>This was the original PIP_Data folder. It was used for testing and development of <code>{pipdp}</code> and <code>{pipaux</code>}, but has since been replaced by <code>PIP-Data_QA</code> and <code>PIP_Data_Testing</code>.</p>
</section>
<section id="pip-data_qa" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="pip-data_qa"><span class="header-section-number">3.2</span> PIP-Data_QA</h2>
<p>This is the main output directory for the <code>{pipdp}</code> and <code>{pipaux}</code> packages. It contains all the survey and auxiliary data needed to run the <a href="pc_pipeline.html">Poverty Calculator</a> and <a href="#tmpipeline">Table Maker</a> pipelines.</p>
<p>Note that the contents of this folder is for QA and production purposes. Please use the <code>PIP_Data_Testing</code> directory, or your own personal testing directory, if you intend to test code changes in <code>{pipdp}</code> or <code>{pipaux}</code>.</p>
<section id="aux" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="aux"><span class="header-section-number">3.2.1</span> _aux</h3>
<p>The <code>_aux</code> folder contains the auxiliary data used by the <a href="pc_pipeline.html">Poverty Calculator Pipeline</a> and the <code>{pipdp}</code> and <code>{pipapi}</code> packages.</p>
<p>Please note the following:</p>
<ol type="1">
<li>The file <code>sna/NAS special_2021-01-14.xlsx</code> is currently hardcoded in <code>{pipaux}</code>. If the contents of the file changes this package might need to be updated.</li>
<li>Some other National Accounts special cases (e.g.&nbsp;BLZ, VEN) are manually hardcoded in pipaux. Beware of this when updating GDP/PCE.</li>
<li>The file <code>weo/weo_&lt;YYYY-MM-DD&gt;.xls</code> needs to be manually downloaded from IMF, opened and then re-saved as <code>weo_&lt;YYYY-MM-DD&gt;.xls</code>.</li>
<li>The grouped data means currently come from the PovcalNet Masterfile. This should be changed when PovcalNet goes out of production.</li>
</ol>
<p>An explanation of each subfolder is given below.</p>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 37%">
<col style="width: 31%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Folder</th>
<th style="text-align: left;">Measure</th>
<th style="text-align: left;">Usage</th>
<th style="text-align: left;">Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">countries</td>
<td style="text-align: left;">PIP country list</td>
<td style="text-align: left;">pipapi</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="even">
<td style="text-align: left;">country_list</td>
<td style="text-align: left;">WDI country list</td>
<td style="text-align: left;">pipaux, PC pipeline</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cp</td>
<td style="text-align: left;">Country profiles</td>
<td style="text-align: left;">pipai</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="even">
<td style="text-align: left;">cpi</td>
<td style="text-align: left;">CPI</td>
<td style="text-align: left;">PC pipeline</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dlw</td>
<td style="text-align: left;">DLW repository</td>
<td style="text-align: left;">pipdp</td>
<td style="text-align: left;">pipdp</td>
</tr>
<tr class="even">
<td style="text-align: left;">gdm</td>
<td style="text-align: left;">Grouped data means</td>
<td style="text-align: left;">PC pipeline</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gdp</td>
<td style="text-align: left;">Gross Domestic Product</td>
<td style="text-align: left;">PC pipeline</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="even">
<td style="text-align: left;">maddison</td>
<td style="text-align: left;">Maddison Project Data</td>
<td style="text-align: left;">pipaux</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="odd">
<td style="text-align: left;">indicators</td>
<td style="text-align: left;">Indicators master</td>
<td style="text-align: left;">pipapi, PC pipeline</td>
<td style="text-align: left;">Manual, pipaux</td>
</tr>
<tr class="even">
<td style="text-align: left;">pce</td>
<td style="text-align: left;">Private consumption</td>
<td style="text-align: left;">PC pipeline</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pfw</td>
<td style="text-align: left;">Price Framework</td>
<td style="text-align: left;">pipdp, PC pipeline</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="even">
<td style="text-align: left;">pl</td>
<td style="text-align: left;">Poverty Lines</td>
<td style="text-align: left;">pipapi</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop</td>
<td style="text-align: left;">Population</td>
<td style="text-align: left;">PC pipeline</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="even">
<td style="text-align: left;">ppp</td>
<td style="text-align: left;">Purchasing Power Parity</td>
<td style="text-align: left;">PC pipeline</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regions</td>
<td style="text-align: left;">Regions</td>
<td style="text-align: left;">pipapi</td>
<td style="text-align: left;">pipaux</td>
</tr>
<tr class="even">
<td style="text-align: left;">sna</td>
<td style="text-align: left;">Special National Account cases</td>
<td style="text-align: left;">pipaux</td>
<td style="text-align: left;">Manual</td>
</tr>
<tr class="odd">
<td style="text-align: left;">weo</td>
<td style="text-align: left;">World Economic Outlook (GDP)</td>
<td style="text-align: left;">pipaux</td>
<td style="text-align: left;">IMF, pipaux</td>
</tr>
</tbody>
</table>
<p>The data in the folders <code>countries</code>, <code>regions</code>, <code>pl</code>, <code>cp</code> and <code>indicators</code> are loaded into the Poverty Calculator pipeline, but that they are not used for any calculations or modified in any way, when being parsed through the pipeline. They are thus only listed with <code>{pipapi}</code> as their usage.</p>
<p>In contrast the measures CPI, GDP, PCE, POP and PPP are both used in the pre-calculations and transformed before being saved as pipeline outputs. So even though these measures are also available in the PIP PC API, the files at this stage only have the Poverty Calculator pipeline as their use case.</p>
</section>
<section id="inventory" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="inventory"><span class="header-section-number">3.2.2</span> _inventory</h3>
<p>The <code>_inventory</code> folder contains the PIP inventory file created by <code>pipload::pip_update_inventory()</code>. It is important to update this file if the survey data has been updated.</p>
</section>
<section id="country-data" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="country-data"><span class="header-section-number">3.2.3</span> Country data</h3>
<p>The folders with country codes as names, e.g <code>AGO</code>, contain survey data for each country. This is created by <code>{pipdp}</code>. The folder structure within each country folder follows roughly the same convention as used by DLW.</p>
<p>There will be one data file for each survey, based on DLW’s <code>GMD</code> module and the grouped data in the PovcalNet-drive. These are labelled with PC in their filenames. Additionally, if there is survey data available from DLW’s <code>ALL</code> module there will also be a dataset for the Table Maker, labelled with TB.</p>
</section>
</section>
<section id="pip-data_extsol" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="pip-data_extsol"><span class="header-section-number">3.3</span> PIP-Data_ExtSOL</h2>
<p>This folder is for external SOL application. This is the folder where the data for the externa SOL will be synced between the network drive and the storage in Azure. The synchronization will be done daily from the ITS side. There are two subfolders GMD-DLW and HFPS-COVID19.</p>
<ul>
<li>GMD-DLW: it is the folder for GMD data for both raw and harmonized GMD data.</li>
<li>HFPS-COVID19: it is the folder for High Frequent Phone Survey data for both raw and harmonized data.</li>
</ul>
<p>The structured folders for these two catalogs are standard likes the ones used in DLW system.</p>
<p>There are dofiles on the synchronization between GMD in DLW and GMD in SOL. Those files are “Data in SOL.xlsx” and “Convert GMD to GMD SOL.do”. Only data with clear and explicit data license will be uploaded in this folder.</p>
<p>For now, only “public data” is in this application. Public means any users can download and redistribute the data, and there is no login in the country NSO website or any condition/terms when downloading the data. Otherwise, there is an explicit agreement with NSO on the usage of the data for SOL – email: Microdata for an external Statistics Online (SOL) platform.</p>
<p>At the moment, we are working with Legal on the Custom license for the data license template where SOL will be mentioned explicitly. Once the Custom license is developed (after the launch of SOL) we can reach out to all countries to ask for permission to use and “limited redistribute” in the data in our secured platform.</p>
<div class="rmdbox rmdwarning">
<p>Please do not touch or change any content in this folder without permission</p>
</div>
</section>
<section id="pip_data_testing" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="pip_data_testing"><span class="header-section-number">3.4</span> PIP_Data_Testing</h2>
<p>This folder is used as a testing directory for development of the <code>{pipdp}</code> and <code>{pipaux}</code> packages.</p>
</section>
<section id="pip_data_vintage" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="pip_data_vintage"><span class="header-section-number">3.5</span> PIP_Data_Vintage</h2>
<p><span style="color:red">This folder is currently not in use</span>.</p>
</section>
<section id="pip_ingestion_pipeline" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="pip_ingestion_pipeline"><span class="header-section-number">3.6</span> pip_ingestion_pipeline</h2>
<p>This is the main output directory for the both the <a href="pc_pipeline.html">Poverty Calculator</a> and <a href="#tmpipeline">Table Maker</a> pipelines.</p>
<section id="pc_data" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="pc_data"><span class="header-section-number">3.6.1</span> pc_data</h3>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Folder</th>
<th style="text-align: left;">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">_targets</td>
<td style="text-align: left;">Targets storage</td>
</tr>
<tr class="even">
<td style="text-align: left;">cache</td>
<td style="text-align: left;">Cleaned survey data</td>
</tr>
<tr class="odd">
<td style="text-align: left;">output</td>
<td style="text-align: left;">PC pipline output directory</td>
</tr>
<tr class="even">
<td style="text-align: left;">validation</td>
<td style="text-align: left;">Validation directory</td>
</tr>
</tbody>
</table>
<section id="targets" class="level4" data-number="3.6.1.1">
<h4 data-number="3.6.1.1" class="anchored" data-anchor-id="targets"><span class="header-section-number">3.6.1.1</span> _targets</h4>
<p>This folder contains the objects that are cached by <code>{targets}</code> when the <a href="pc_pipeline.html">Poverty Calculator Pipeline</a> is run. It is located on the shared network drive so that the latest cached objects are available to all team members. Please note however that a shared <code>_targets</code> folder does entail some risks. <strong>It is very important that only one person runs the pipeline at a time.</strong> Concurrent runs against the same <code>_targets</code> store will wreak havoc. And needless to say; if you are developing new features or customising the pipeline use a different <code>_targets</code> store. (<span style="color:red">We should probably have a custom DEV or testing folder for this, similar to PIP_Data_Testing</span>.)</p>
</section>
<section id="cache" class="level4" data-number="3.6.1.2">
<h4 data-number="3.6.1.2" class="anchored" data-anchor-id="cache"><span class="header-section-number">3.6.1.2</span> cache</h4>
<p>The survey data output of <code>{pipdp}</code> cannot be directly used as input to the <a href="pc_pipeline.html">Poverty Calculator Pipeline</a>. This is because the data needs to be cleaned before running the necessary pre-calculations for the PIP database. The cleaning currently includes removal of rows with missing welfare and weight values, standardising of grouped data, and restructuring of datasets with both income and consumption based welfare values in the same survey. Please refer to <code>{wbpip}</code> and <code>{pipdm}</code> for the latest cleaning procedures.</p>
<p>In order to avoid doing this cleaning every time the pipeline runs an intermediate version of the survey data is stored in the <code>cache/clean_survey_data/</code> folder. Please make sure this folder is up-to-date before running the <code>_targets.R</code> pipeline.</p>
<p><span style="color:red">Note: This is not exactly true. We need to solve the issue with the double caching of survey data. But the essence of what we want to accomplish is to avoid cleaning and checking the survey data in every pipeline run.</span>.</p>
</section>
<section id="output" class="level4" data-number="3.6.1.3">
<h4 data-number="3.6.1.3" class="anchored" data-anchor-id="output"><span class="header-section-number">3.6.1.3</span> output</h4>
<p>This folder contains the outputs of the <a href="pc_pipeline.html">Poverty Calculator Pipeline</a>. This is seperated into three subfolders; <code>aux</code> containing the auxiliary data, <code>estimations</code> containing the survey, interpolated and distributional pre-calculated estimates, and <code>survey_data</code> containing the cleaned survey data.</p>
</section>
<section id="validation" class="level4" data-number="3.6.1.4">
<h4 data-number="3.6.1.4" class="anchored" data-anchor-id="validation"><span class="header-section-number">3.6.1.4</span> validation</h4>
<p>TBD <span style="color:red">Andres: Could you write this section?</span>.</p>
</section>
</section>
<section id="tb_data" class="level3" data-number="3.6.2">
<h3 data-number="3.6.2" class="anchored" data-anchor-id="tb_data"><span class="header-section-number">3.6.2</span> tb_data</h3>
<p>TBD <span style="color:red">Andres: Could you write this section?</span>.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./internal_workflow.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Internal Workflow</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./joining_data.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Joining Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>